// Расширенная база знаний и факты для обучения нейронки
export const trainingData = {
  pushkin: {
    dates: {
      'Евгений Онегин': { written: '1823-1833', published: 1833 },
      'Пиковая дама': { written: '1833', published: 1834 },
      'Борис Годунов': { written: '1824-1825', published: 1831 },
      'Мцыри': { written: '1821', published: 1828 },
      'Руслан и Людмила': { written: '1818-1820', published: 1820 },
      'Капитанская дочка': { written: '1833', published: 1836 },
      'Медный всадник': { written: '1833', published: 1834 },
    },
    characters: {
      'Евгений Онегин': ['Евгений Онегин', 'Татьяна Ларина', 'Владимир Ленский', 'Ольга'],
      'Пиковая дама': ['Герман', 'Нарумов', 'Графиня', 'Лизавета'],
      'Капитанская дочка': ['Петр Гринев', 'Маша Миронова', 'Емельян Пугачев'],
    },
    detailedFacts: [
      'Пушкин родился 6 июня 1799 года в Москве',
      'Дорогие дуэли: встречался с Кюхельбекером, погиб на дуэли с Д\'Антесом в 1837 году',
      'Лицей: учился в Царскосельском лицее (1811-1817) вместе с Иван Пущиным',
      'Ссылка: был сослан на Кавказ и Бессарабию за либеральные взгляды',
      'Языкотворец: создал нормы современного русского литературного языка',
      'Онегин - роман в стихах, 389 строф, завершён за 8 лет работы',
      'Борис Годунов написан историческим стихом, спровоцировано Карамзиным',
    ]
  },

  tolstoy: {
    dates: {
      'Война и мир': { written: '1865-1867', published: 1869 },
      'Анна Каренина': { written: '1877', published: 1877 },
      'Воскресенье': { written: '1889-1899', published: 1900 },
      'Крейцерова соната': { written: '1889', published: 1891 },
      'Смерть Ивана Ильича': { written: '1882-1886', published: 1886 },
    },
    characters: {
      'Война и мир': ['Пьер Безухов', 'Наташа Ростова', 'Андрей Болконский', 'Николай Ростов'],
      'Анна Каренина': ['Анна Каренина', 'Алексей Вронский', 'Константин Левин', 'Кити'],
    },
    detailedFacts: [
      'Толстой родился 28 августа 1828 года в имении Ясная Поляна',
      'В 1851 служил офицером на Кавказе',
      'Участвовал в Крымской войне (1853-1856)',
      'Война и мир включает 600+ персонажей, описывает события 1812-1820 годов',
      'Анна Каренина считается одним из величайших романов в истории литературы',
      'В 1880-х годах Толстой прошел духовный кризис и обратился к религии',
      'Основал школу для крестьянских детей в Ясной Поляне',
      'Все счастливые семьи похожи одна на другую - самая известная фраза в литературе',
    ]
  },

  dostoevsky: {
    dates: {
      'Преступление и наказание': { written: '1866', published: 1866 },
      'Идиот': { written: '1868-1869', published: 1869 },
      'Братья Карамазовы': { written: '1879-1880', published: 1880 },
      'Демоны': { written: '1871-1872', published: 1872 },
      'Записки из подполья': { written: '1864', published: 1864 },
    },
    characters: {
      'Преступление и наказание': ['Раскольников', 'Соня Мармеладова', 'Порфирий Петрович', 'Наполеон'],
      'Братья Карамазовы': ['Иван Карамазов', 'Алеша Карамазов', 'Дмитрий Карамазов', 'Смердяков'],
    },
    detailedFacts: [
      'Достоевский родился 11 ноября 1821 года в Москве',
      'В 1849 году приговорен к смерти, но помилован на эшафоте',
      'Отбыл каторгу в Омской крепости (1850-1854)',
      'Преступление и наказание - первый психологический роман, 671 страница',
      'Великий инквизитор - поэма в составе Братьев Карамазовых, шедевр философской литературы',
      'Идиот - князь Мышкин считается воплощением доброты и сострадания',
      'Достоевский писал под большим психологическим и физическим напряжением',
      'Эпилепсия повлияла на его творчество и философию',
    ]
  },

  shakespeare: {
    dates: {
      'Гамлет': { written: '1600-1601', published: 1603 },
      'Макбет': { written: '1606', published: 1623 },
      'Ромео и Джульетта': { written: '1594-1596', published: 1597 },
      'Король Лир': { written: '1605-1606', published: 1608 },
      'Отелло': { written: '1603-1604', published: 1622 },
      'Сон в летнюю ночь': { written: '1595-1596', published: 1600 },
      'Буря': { written: '1610-1611', published: 1623 },
    },
    characters: {
      'Гамлет': ['Гамлет', 'Офелия', 'Клавдий', 'Гертруда', 'Горацио'],
      'Ромео и Джульетта': ['Ромео Монтекки', 'Джульетта Капулетти', 'Меркуцио', 'Петр'],
      'Король Лир': ['Король Лир', 'Корделия', 'Гонерилия', 'Регана', 'Глостер'],
    },
    detailedFacts: [
      'Шекспир родился 23 апреля 1564 года в Стратфорде-апон-Эйвоне',
      'Театр Глобус был его основным театром в Лондоне',
      'Написал 37 пьес: 10 трагедий, 17 комедий, 10 историй',
      'Написал 154 сонета, поэмы "Венера и Адонис" и "Луцреция"',
      'Гамлет - самая длинная пьеса, 4042 строк',
      'Умер 23 апреля 1616 года в возрасте 52 лет',
      'Его произведения переводились более чем на 100 языков',
      'Считается создателем современного английского языка',
    ]
  },

  cervantes: {
    dates: {
      'Дон Кихот': { written: '1604-1615', published: '1605, 1615' },
      'Новеллы примерные': { written: '1613', published: 1613 },
      'Галатея': { written: '1582-1584', published: 1585 },
    },
    characters: {
      'Дон Кихот': ['Алонсо Кихано (Дон Кихот)', 'Санчо Панса', 'Дульцинея дель Тобосо', 'Роцинант'],
      'Новеллы примерные': ['Граф Артоко', 'Камила', 'Лотарио', 'Цыганка Пресиоса'],
    },
    detailedFacts: [
      'Сервантес родился 29 сентября 1547 года в Алкале де Энаресе',
      'Был ранен при битве при Лепанто (1571) - потерял использование левой руки',
      'Был захвачен берберийскими пиратами и содержался в рабстве в Алжире 5 лет',
      'Дон Кихот считается первым современным романом, написанным в виде пародии на рыцарские романы',
      'Книга охватывает 2 000 000 слов, разделена на 126 частей и 152 главы',
      'Персонаж Дон Кихота стал символом невинного энтузиазма и идеализма',
      'Дон Кихот переведён на более чем 70 языков и является одной из наиболее читаемых книг',
      'Санчо Панса представляет здравый смысл в контрасте с фантазией Дон Кихота',
    ]
  }
};

// Система отслеживания обучений
export const learningSystem = {
  trackCorrection: (userId, writerId, userMessage, correction, timestamp) => {
    return {
      userId,
      writerId,
      userMessage,
      correction,
      timestamp,
      priority: 'high',
      used: false
    };
  },

  generateLearningPrompt: (corrections) => {
    if (corrections.length === 0) return '';
    
    let prompt = 'CRITICAL LEARNING MATERIAL - USER PROVIDED CORRECTIONS:\n\n';
    corrections.forEach((c, idx) => {
      prompt += `${idx + 1}. USER MESSAGE: "${c.userMessage}"\n`;
      prompt += `   CORRECT ANSWER: "${c.correction}"\n`;
      prompt += `   IMPORTANCE: Critical - use this in future responses\n\n`;
    });
    
    prompt += 'INSTRUCTIONS:\n';
    prompt += '- These corrections are HIGH PRIORITY\n';
    prompt += '- Remember these facts when answering similar questions\n';
    prompt += '- Apply this knowledge in your responses\n';
    prompt += '- Do NOT repeat the mistakes mentioned\n';
    
    return prompt;
  },

  verifyFact: (fact, writerId, knownFacts) => {
    // Проверяет, похожа ли ошибка на известные факты
    for (const known of knownFacts) {
      if (fact.includes(known) || known.includes(fact)) {
        return { isValid: true, matchingFact: known };
      }
    }
    return { isValid: false };
  }
};
