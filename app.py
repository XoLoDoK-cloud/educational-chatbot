from flask import Flask, request, jsonify, render_template
import os

app = Flask(__name__)

# Sample Russian literature database
LITERATURE_DB = {
    "pushkin": {
        "name": "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–µ—Ä–≥–µ–µ–≤–∏—á –ü—É—à–∫–∏–Ω",
        "years": "1799-1837",
        "bio": "–ü—É—à–∫–∏–Ω –ø—Ä–æ–∂–∏–ª –∂–∏–∑–Ω—å –ø–æ–ª–Ω—É—é —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ –∏ —Å—Ç—Ä–∞—Å—Ç–µ–π. –†–æ–¥–∏–ª—Å—è –≤ –ú–æ—Å–∫–≤–µ –≤ –¥–≤–æ—Ä—è–Ω—Å–∫–æ–π —Å–µ–º—å–µ. –í —é–Ω–æ—Å—Ç–∏ —Å–ª—É–∂–∏–ª –≤ –∫–æ–ª–ª–µ–≥–∏–∏ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö –¥–µ–ª, –∑–∞—Ç–µ–º –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —Å—Å—ã–ª–∫—É –∑–∞ —Å–≤–æ–∏ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–∑–≥–ª—è–¥—ã. –ñ–∏–∑–Ω—å –µ–≥–æ –±—ã–ª–∞ –Ω–∞—Å—ã—â–µ–Ω–∞ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏, –¥—É—ç–ª—è–º–∏ –∏ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–º–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏. –û–Ω —Å–æ–∑–¥–∞–ª —è–∑—ã–∫ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—É—Å—Å–∫–æ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–º —Ä—É—Å—Å–∫–æ–≥–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–≥–æ —è–∑—ã–∫–∞. –ü–æ–≥–∏–± –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –¥—É—ç–ª–∏.",
        "works": ["–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω", "–ú–µ–¥–Ω—ã–π –≤—Å–∞–¥–Ω–∏–∫", "–ë–æ—Ä–∏—Å –ì–æ–¥—É–Ω–æ–≤", "–ü–∏–∫–æ–≤–∞—è –¥–∞–º–∞", "–ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è –¥–æ—á–∫–∞"],
        "quotes": [
            "–Ø –ø–æ–º–Ω—é —á—É–¥–Ω–æ–µ –º–≥–Ω–æ–≤–µ–Ω—å–µ: –ø–µ—Ä–µ–¥–æ –º–Ω–æ—é —è–≤–∏–ª–∞—Å—å –≤—ã",
            "–ö—Ä–∞—Å–æ—Ç–∞ –¥—É—à–∏ —Å–≤–µ—Ç–∏—Ç, –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ —Å—á–∞—Å—Ç–ª–∏–≤",
            "–ü—Ä–∏–∑–Ω–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å - –≤–æ—Ç —á—É–≤—Å—Ç–≤–æ –≤—ã—à–µ –≤—Å–µ—Ö –¥—Ä—É–≥–∏—Ö"
        ]
    },
    "lermontov": {
        "name": "–ú–∏—Ö–∞–∏–ª –Æ—Ä—å–µ–≤–∏—á –õ–µ—Ä–º–æ–Ω—Ç–æ–≤",
        "years": "1814-1841",
        "bio": "–õ–µ—Ä–º–æ–Ω—Ç–æ–≤ –±—ã–ª –æ–¥–Ω–∏–º –∏–∑ –≤–µ–ª–∏—á–∞–π—à–∏—Ö –ø–æ—ç—Ç–æ–≤ –†–æ—Å—Å–∏–∏. –ï–≥–æ –∂–∏–∑–Ω—å –±—ã–ª–∞ –∫–æ—Ä–æ—Ç–∫–æ–π, –Ω–æ –Ω–∞—Å—ã—â–µ–Ω–Ω–æ–π. –û–Ω —Å–ª—É–∂–∏–ª –æ—Ñ–∏—Ü–µ—Ä–æ–º –≤ —Ä—É—Å—Å–∫–æ–π –∞—Ä–º–∏–∏, —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ –±–æ–µ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö –Ω–∞ –ö–∞–≤–∫–∞–∑–µ. –ï–≥–æ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç—Å—è –≥–ª—É–±–æ–∫–∏–º –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∑–º–æ–º, —Ä–æ–º–∞–Ω—Ç–∏–∑–º–æ–º –∏ –∫—Ä–∏—Ç–∏–∫–æ–π –æ–±—â–µ—Å—Ç–≤–∞. –ü–æ–≥–∏–± –Ω–∞ –¥—É—ç–ª–∏ –≤ –≤–æ–∑—Ä–∞—Å—Ç–µ 26 –ª–µ—Ç.",
        "works": ["–ì–µ—Ä–æ–π –Ω–∞—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏", "–ú—Ü—ã—Ä–∏", "–î–µ–º–æ–Ω", "–ü–∞—Ä—É—Å"],
        "quotes": [
            "–ù–µ—Ç, —è –Ω–µ –ë–∞–π—Ä–æ–Ω, —è –¥—Ä—É–≥–æ–π",
            "–í –†–æ—Å—Å–∏–∏ –¥–≤–∞ –±–µ–¥—ã: –¥–æ—Ä–æ–≥–∏ –∏ –¥—É—Ä–∞–∫–∏"
        ]
    },
    "dostoevsky": {
        "name": "–§–µ–¥–æ—Ä –ú–∏—Ö–∞–π–ª–æ–≤–∏—á –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π",
        "years": "1821-1881",
        "bio": "–î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π - –≤–µ–ª–∏–∫–∏–π —Ä—É—Å—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å, —Ñ–∏–ª–æ—Å–æ—Ñ –∏ –ø—Å–∏—Ö–æ–ª–æ–≥. –ï–≥–æ –∂–∏–∑–Ω—å –±—ã–ª–∞ –ø–æ–ª–Ω–∞ —Ç—Ä—É–¥–Ω–æ—Å—Ç–µ–π: –æ–Ω —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–æ–º –∫—Ä—É–∂–∫–µ, –±—ã–ª –ø—Ä–∏–≥–æ–≤–æ—Ä–µ–Ω –∫ —Å–º–µ—Ä—Ç–Ω–æ–π –∫–∞–∑–Ω–∏ (–ø–æ–º–∏–ª–æ–≤–∞–Ω –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–º–µ–Ω—Ç), –æ—Ç–±—ã–≤–∞–ª –∫–∞—Ç–æ—Ä–≥—É. –ï–≥–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≥–ª—É–±–æ–∫–æ –∏—Å—Å–ª–µ–¥—É—é—Ç –ø—Ä–∏—Ä–æ–¥—É —á–µ–ª–æ–≤–µ–∫–∞, –º–æ—Ä–∞–ª—å –∏ —Å–º—ã—Å–ª –∂–∏–∑–Ω–∏.",
        "works": ["–ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ", "–ò–¥–∏–æ—Ç", "–ë–µ—Å—ã", "–ë—Ä–∞—Ç—å—è –ö–∞—Ä–∞–º–∞–∑–æ–≤—ã", "–ó–∞–ø–∏—Å–∫–∏ –∏–∑ –ø–æ–¥–ø–æ–ª—å—è"],
        "quotes": [
            "–ö—Ä–∞—Å–æ—Ç–∞ —Å–ø–∞—Å–µ—Ç –º–∏—Ä",
            "–ò—Å–ø—ã—Ç–∞–Ω–∏–µ –≥–µ—Ä–æ–µ–≤ - –≤ –∏—Å–ø—ã—Ç–∞–Ω–∏—è—Ö —Å–∞–º–æ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ"
        ]
    }
}

def get_response(query):
    """Generate Russian response to literary query"""
    query_lower = query.lower()
    
    # Check if query is about a specific author
    for author_key, author_data in LITERATURE_DB.items():
        if author_key in query_lower or author_data["name"].lower() in query_lower:
            quotes_text = '\n'.join([f"{i+1}. \"{quote}\"" for i, quote in enumerate(author_data['quotes'])])
            response = f"""
üîç –ê–ù–ê–õ–ò–ó –ó–ê–ü–†–û–°–ê
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üìñ {author_data['name']}
–ì–æ–¥—ã –∂–∏–∑–Ω–∏: {author_data['years']}

üèõÔ∏è –ë–ò–û–ì–†–ê–§–ò–Ø
{author_data['bio']}

üìö –û–°–ù–û–í–ù–´–ï –ü–†–û–ò–ó–í–ï–î–ï–ù–ò–Ø
{', '.join(author_data['works'])}

üí≠ –ò–ó–í–ï–°–¢–ù–´–ï –¶–ò–¢–ê–¢–´
{quotes_text}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚ú® –û—Ç–≤–µ—Ç –æ—Ç AI Neural Network (–ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ)
"""
            return response
    
    # Default response if author not found
    return """
üîç –ê–ù–ê–õ–ò–ó –ó–ê–ü–†–û–°–ê
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –Ω–µ –Ω–∞—à–µ–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É.

–Ø –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ:
- –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–µ—Ä–≥–µ–µ–≤–∏—á –ü—É—à–∫–∏–Ω
- –ú–∏—Ö–∞–∏–ª –Æ—Ä—å–µ–≤–∏—á –õ–µ—Ä–º–æ–Ω—Ç–æ–≤
- –§–µ–¥–æ—Ä –ú–∏—Ö–∞–π–ª–æ–≤–∏—á –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π

–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ–± –æ–¥–Ω–æ–º –∏–∑ —ç—Ç–∏—Ö –∞–≤—Ç–æ—Ä–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –∏ —è –¥–∞–º –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç–≤–µ—Ç.

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚ú® –û—Ç–≤–µ—Ç –æ—Ç AI Neural Network (–ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ)
"""

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/api/chat', methods=['POST'])
def chat():
    data = request.get_json()
    user_query = data.get('query', '')
    
    if not user_query:
        return jsonify({'error': '–ü—É—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å'}), 400
    
    response = get_response(user_query)
    return jsonify({'response': response})

@app.route('/health')
def health():
    return jsonify({'status': 'ok'})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=True)
